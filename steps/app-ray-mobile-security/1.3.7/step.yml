title: |-
  App-Ray Mobile Security
summary: |
  Mobile application security testing with App-Ray's engine via API
description: |
  Fully automated mobile application security testing identifies vulnerabilities, mitigate risks, comply with regulations whether you are developer, CISO, CEO.
website: https://app-ray.co/
source_code_url: https://github.com/App-Ray/bitrise-step-app-ray-mobile-security
support_url: https://github.com/App-Ray/bitrise-step-app-ray-mobile-security/issues
host_os_tags:
  - osx-10.10
  - ubuntu-16.04

type_tags:
  - test

is_requires_admin_user: true
is_always_run: false
is_skippable: false
run_if: ""

deps:
  brew:
  - name: curl
  apt_get:
  - name: curl


toolkit:
  bash:
    entry_file: step.sh


inputs:
  - base_url:
    opts:
     title: AppRay instance base URL
     description: |-
          Your App-Ray base URL
          Example https://demo.app-ray.co/
          URL MUST end with /
     summary: |-
          Your App-Ray base URL 
          Example https://demo.app-ray.co/
     is_required: true
  - app_path:
    opts:
     title: APK or IPA file path
     description: |-
          Path to the app file you want to upload, generated by Bitrise, usually like $BITRISE\_APK\_PATH or $BITRISE\_IPA\_PATH
     summary: |-
          The app file you want to upload, usually like $BITRISE\_APK\_PATH or $BITRISE\_IPA\_PATH
     is_required: true
     is_expand: true

  - appray_api_token:
    opts:
     title: App-Ray API token
     description: Your App-Ray authentication token, it can be a one time token or a permanent token
     summary: App-Ray API authentication token
     is_required: true
     is_sensitive: true
    
  - score_treshold:
    opts:
     title: Risk Score treshold
     description: Score from 0 to 100
     summary: |-
        Risk Score treshold of which to decide if the analysis was succesful on the application
        Value 0-100, where 100 is the highest risk
     is_required: true

  - result_path: "*build/test-results/"
    opts:
      category: Options
      title: Test XML result directory pattern
      summary: |-
        Step will use this directory pattern to export test XML results. If left blank no results will be saved
      description: |-
        The step will use this pattern to export security analysis XML results.
        The pattern needs to be relative to the selected module's directory.
        The pattern MUST end with /
      is_required: false
      is_expand: true


outputs:
  - APP_RAY_RISK_SCORE:
    opts:
      title: App-Ray Risk Score
      summary: App-Ray analysis result risk score
      description: |
        Analysis result risk score

