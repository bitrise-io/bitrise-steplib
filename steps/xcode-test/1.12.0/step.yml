title: Xcode Test
summary: |-
  Write the tests and run them on every build just to make sure those tiny
  code goblins didn't put something in the code that shouldn't be there while
  you were at the daily Scrum meeting.
description: Runs Xcode's `test` action.
website: https://github.com/bitrise-io/steps-xcode-test
source_code_url: https://github.com/bitrise-io/steps-xcode-test
support_url: https://github.com/bitrise-io/steps-xcode-test/issues
published_at: 2016-02-12T17:06:39.586698476+01:00
source:
  git: https://github.com/bitrise-io/steps-xcode-test.git
  commit: c3e6b5ebba153b633f56849b8c5aa801a63dd6db
host_os_tags:
- osx-10.10
project_type_tags:
- ios
type_tags:
- build
- xcode
dependencies:
- manager: _
  name: xcode
- manager: brew
  name: go
deps:
  brew:
  - name: go
  check_only:
  - name: xcode
is_requires_admin_user: false
is_always_run: false
is_skippable: false
inputs:
- opts:
    description: |
      Working directory of the step.
      You can leave it empty to don't change it.
    is_required: false
    title: Working directory
  workdir: $BITRISE_SOURCE_DIR
- opts:
    description: |
      A `.xcodeproj` or `.xcworkspace` path, relative to
      the Working directory (if specified).
    is_required: true
    title: Project (or Workspace) path
  project_path: $BITRISE_PROJECT_PATH
- opts:
    description: |
      The Scheme to use.

      **IMPORTANT**: The Scheme have to be marked as __shared__ in Xcode!
    is_required: true
    title: Scheme name
  scheme: $BITRISE_SCHEME
- opts:
    description: |-
      Set it as it is shown in Xcode's device selection dropdown UI.

      A couple of examples (the
      actual available options depend on which versions
      are installed):

      * iOS Simulator
      * tvOS Simulator
    is_required: true
    title: Platform
    value_options:
    - iOS Simulator
    - tvOS Simulator
  simulator_platform: iOS Simulator
- opts:
    description: |-
      Set it as it is shown in Xcode's device selection dropdown UI.

      A couple of examples (the
      actual available options depend on which versions
      are installed):

      * iPhone 6
      * iPhone 6 Plus
      * iPad
      * iPad Air
      * Apple TV 1080p (don't forget to set the platform to `tvOS Simulator` to use this option!)
    is_required: true
    title: Device
  simulator_device: iPhone 6
- opts:
    description: |
      Set it as it is shown in
      Xcode's device selection dropdown UI.

      A couple of format examples (the
      actual available options depend on which versions
      are installed):

      * 8.4
      * latest
    is_required: false
    title: OS version
  simulator_os_version: latest
- is_clean_build: "no"
  opts:
    is_required: true
    title: Do a clean Xcode build before testing?
    value_options:
    - "yes"
    - "no"
- generate_code_coverage_files: "no"
  opts:
    is_required: true
    title: Generate code coverage files?
    value_options:
    - "yes"
    - "no"
- opts:
    description: |-
      **This option is only available if you set `xcpretty` as the `output_tool`.**

      Test results in HTML format, generated by `xcpretty`,
      will be saved to this file.
    is_required: true
    title: Test results file path
  test_results_file_path: ${BITRISE_DEPLOY_DIR}/xcode-test-results-${BITRISE_SCHEME}.html
- opts:
    description: |-
      If output_tool is set to xcpretty, the xcodebuild output will be prettified by xcpretty.
      If output_tool is set to xcodebuild, the raw xcodebuild output will be printed.
    is_required: true
    title: Output tool
    value_options:
    - xcpretty
    - xcodebuild
  output_tool: xcpretty
- export_uitest_artifacts: "false"
  opts:
    description: |
      If enabled, the attachments of the UITest will be exported into the BITRISE_DEPLOY_DIR, as a compressed ZIP file.
      Attachments include screenshots taken during the UI test, and other artifacts.
    title: Export UITest Artifacts
    value_options:
    - "true"
    - "false"
outputs:
- BITRISE_XCODE_TEST_RESULT: null
  opts:
    title: Result of the tests. 'succeeded' or 'failed'.
    value_options:
    - succeeded
    - failed
- BITRISE_XCODE_RAW_TEST_RESULT_TEXT_PATH: null
  opts:
    description: |-
      This is the path of the raw test results log file.

      If the compilation fails this log will contain the compilation output,
      if the tests can be started it'll only include the test output.
    title: The full, raw test output file path
- BITRISE_XCODE_TEST_ATTACHMENTS_PATH: null
  opts:
    description: This is the path of the test attachments zip.
    title: The full, test attachments zip path
