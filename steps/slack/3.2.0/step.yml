title: Send a Slack message
summary: Send a [Slack](https://slack.com/) message to a channel or group.
description: "\nSend a [Slack](https://slack.com/) message to a Slack user, a group,
  or a channel. Create and customize the messages however you see fit. Among other
  things, you can:\n\n- Set a different text for failed and successful builds.\n-
  Add an icon and/or emojis to your messages. \n- Set the bot user's name for the
  messages.\n- Linkify channel names and usernames.\n- Add and customize attachments.
  \n\n### Configuring the Step \n\nTo use this Step, you need either an incoming Slack
  webhook or a Slack bot user with an API token. You can set up both on your Slack
  account:\n\n- [Incoming webhooks](https://api.slack.com/incoming-webhooks).\n- [Bot
  user with an API token](https://api.slack.com/bot-users).\n\nOnce you're ready with
  those, come back to Bitrise and configure the Step itself.\n\n1. Create a [Secret
  Env Var](https://devcenter.bitrise.io/builds/env-vars-secret-env-vars/) for either
  your Slack webhook URL or your Slack API token.\n1. Add the Secret to either the
  **Slack Webhook URL** or the **Slack API token** input.\n1. Toggle the **Run if
  previous Step failed** option on - you should see a white checkmark on green background
  next to it. This allows Slack messages to be sent for failed builds, too.\n1. In
  the **Target Slack channel, group or username**, set where the Slack message should
  be sent. \n1. Customize your messages as you'd like. For the details, see the respective
  inputs.  \n\n### Troubleshooting \n\nDon't forget to make sure that the Step runs
  even if the build fails: you need to set it so that it runs even if a previous Step
  failed. \n\nIf the Step fails, check your Slack settings, the incoming webhook or
  the API token, and your Slack channel permissions. \n\n### Useful links \n\n- [Integrating
  with Slack](https://devcenter.bitrise.io/builds/configuring-notifications/#integrating-with-slack)\n-
  [Slack attachments](https://api.slack.com/messaging/composing/layouts#attachments)\n\n###
  Related Steps \n\n- [Send email with Mailgun](https://www.bitrise.io/integrations/steps/email-with-mailgun)\n-
  [Post Jira Comment](https://www.bitrise.io/integrations/steps/post-jira-comment-with-build-details)"
website: https://github.com/bitrise-io/steps-slack-message
source_code_url: https://github.com/bitrise-io/steps-slack-message
support_url: https://github.com/bitrise-io/steps-slack-message/issues
published_at: 2021-09-30T08:29:14.393475623Z
source:
  git: https://github.com/bitrise-steplib/steps-slack-message.git
  commit: d3ce902c2159b2d41aecd3b560092d1662b0970b
type_tags:
- notification
toolkit:
  go:
    package_name: github.com/bitrise-io/steps-slack-message
is_requires_admin_user: false
is_always_run: true
is_skippable: true
inputs:
- is_debug_mode: "no"
  opts:
    description: |
      Step prints additional debug information if this option
      is enabled
    title: Debug mode?
    value_options:
    - "yes"
    - "no"
- opts:
    description: |
      **Either webhook\_url or api\_token input is required.**
      To register an **Incoming WebHook integration** visit: https://api.slack.com/incoming-webhooks
    is_required: false
    is_sensitive: true
    title: Slack Webhook URL (Webhook or API token is required)
  webhook_url: null
- opts:
    category: If Build Failed
    description: |
      **Either webhook\_url or api\_token input is required.**
      To register an **Incoming WebHook integration** visit: https://api.slack.com/incoming-webhooks
    is_required: false
    is_sensitive: true
    title: Slack Webhook URL (Webhook or API token is required) if the build failed
  webhook_url_on_error: null
- api_token: null
  opts:
    description: |
      **Either webhook\_url or api\_token input is required.**

      To setup a **bot with an API token** visit: https://api.slack.com/bot-users
    is_required: false
    is_sensitive: true
    title: Slack API token (Webhook or API token is required)
- channel: null
  opts:
    description: |
      Can be an encoded ID, or the channel's name.
       Examples:
       * channel ID: C024BE91L
       * channel: #general
       * username: @username
    title: Target Slack channel, group or username
- channel_on_error: null
  opts:
    category: If Build Failed
    description: |
      * channel example: #general
      * username example: @username
    title: Target Slack channel, group or username if the build failed
- opts:
    description: |
      Text of the message to send.
      Required unless you wish to send attachments only.
    title: Text of the message.
  text: null
- opts:
    category: If Build Failed
    description: |
      This option will be used if the build failed. If you
      leave this option empty then the default one will be used.
    title: Text of the message if the build failed
  text_on_error: null
- emoji: null
  opts:
    description: |
      Optionally you can specify a Slack emoji as the sender
      icon. You can use the Ghost icon for example
      if you specify `:ghost:` here as an input.
      **If you specify an Icon URL then this Emoji input will be ignored!**
    title: Emoji to use as the icon for the message
- emoji_on_error: null
  opts:
    category: If Build Failed
    description: |
      **This option will be used if the build failed.** If you
      leave this option empty then the default one will be used.
    title: Emoji to use as the icon for the message if the build failed
- icon_url: https://github.com/bitrise-io.png
  opts:
    description: |
      Optionally, you can specify a custom icon image URL
      which will be presented as the sender icon.
      Slack recommends an image a square image,
      which can't be larger than 128px in either width or height,
      and it must be smaller than 64K in size.
      Slack custom emoji guideline: [https://slack.zendesk.com/hc/en-us/articles/202931348-Using-emoji-and-emoticons](https://slack.zendesk.com/hc/en-us/articles/202931348-Using-emoji-and-emoticons)
      If you specify this input, the **Emoji** input will be ignored!
    title: Message icon
- icon_url_on_error: https://github.com/bitrise-io.png
  opts:
    category: If Build Failed
    description: |
      This option will be used if the build failed. If you
      leave this option empty then the default one will be used.
    title: Message icon if the build failed
- link_names: "yes"
  opts:
    description: |
      Linkify names in the message such as `@slackbot` or `#random`
    title: Linkify channel names and usernames?
    value_options:
    - "yes"
    - "no"
- from_username: Bitrise
  opts:
    description: |
      The username of the bot user which will be presented as the sender of the message
    title: The bot's username for the message
- from_username_on_error: Bitrise
  opts:
    category: If Build Failed
    description: |
      This option will be used if the build failed. If you
      leave this option empty then the default one will be used.
    title: The bot's username for the message if the build failed
- color: '#3bc3a3'
  opts:
    description: |
      Color is used to color the border along the left side of the attachment.
      Can either be one of good, warning, danger, or any hex color code (eg. #439FE0).
      You can find more info about the color and other text formatting
      in [Slack's documentation](https://api.slack.com/docs/message-attachments).
    is_required: true
    title: Message color
- color_on_error: '#f0741f'
  opts:
    category: If Build Failed
    description: |
      This option will be used if the build failed. If you
      leave this option empty then the default one will be used.
    title: Message color if the build failed
- opts:
    description: An optional text that appears above the attachment block.
    title: An optional text that appears above the attachment block.
  pretext: '*Build Succeeded!*'
- opts:
    category: If Build Failed
    description: |
      This option will be used if the build failed. If you
      leave this option empty then the default one will be used.
    title: An optional text that appears above the attachment block if the build failed
  pretext_on_error: '*Build Failed!*'
- author_name: $GIT_CLONE_COMMIT_AUTHOR_NAME
  opts:
    description: A small text used to display the author's name.
    title: A small text used to display the author's name.
- opts:
    description: Title is displayed as larger, bold text near the top of a attachment.
    title: The title of the attachment
  title: $GIT_CLONE_COMMIT_MESSAGE_SUBJECT
- opts:
    category: If Build Failed
    description: |
      This option will be used if the build failed. If you
      leave this option empty then the default one will be used.
    title: The title of the attachment if the build failed
  title_on_error: null
- opts:
    description: A URL that will hyperlink the title.
    title: A URL that will hyperlink the title.
  title_link: null
- message: $GIT_CLONE_COMMIT_MESSAGE_BODY
  opts:
    description: |
      Text is the main text of the attachment, and can contain standard message markup.
      The content will automatically collapse if it contains 700+ characters or 5+ linebreaks,
      and will display a "Show more..." link to expand the content.
    title: Text is the main text of the attachment
- message_on_error: $GIT_CLONE_COMMIT_MESSAGE_BODY
  opts:
    category: If Build Failed
    description: |
      This option will be used if the build failed. If you
      leave this option empty then the default one will be used.
    title: Text is the main text of the attachment if the build failed
- image_url: null
  opts:
    description: |
      A URL to an image file that will be displayed inside the attachment.

      Supported formats: GIF, JPEG, PNG, and BMP.
      Large images will be resized to a maximum width of 400px or a maximum height of 500px.
    title: A URL to an image file that will be displayed inside the attachment
- image_url_on_error: null
  opts:
    category: If Build Failed
    description: |
      This option will be used if the build failed. If you
      leave this option empty then the default one will be used.
    title: Image URL if build failed
- opts:
    description: |
      A URL to an image file that will be displayed as a thumbnail on the right side of a attachment.

      Supported formats: GIF, JPEG, PNG, and BMP.
      The thumbnail's longest dimension will be scaled down to 75px.
    title: A URL to an image file that will be displayed as a thumbnail
  thumb_url: null
- opts:
    category: If Build Failed
    description: |
      This option will be used if the build failed. If you
      leave this option empty then the default one will be used.
    title: Thumbnail if the build failed
  thumb_url_on_error: null
- footer: Bitrise
  opts:
    description: |
      The footer adds some brief text to help contextualize and identify an attachment.

      Limited to 300 characters.
    title: Footer adds some brief text as footer
- footer_icon: https://github.com/bitrise-io.png?size=16
  opts:
    description: |
      Renders a small icon beside the footer text
      It will be scaled down to 16px by 16px.
    title: Renders a small icon beside the footer text
- opts:
    description: Show the current time as part of the attachment's footer?
    title: Show the current time as part of the attachment's footer?
    value_options:
    - "yes"
    - "no"
  timestamp: "yes"
- fields: |
    App|${BITRISE_APP_TITLE}
    Branch|${BITRISE_GIT_BRANCH}
    Workflow|${BITRISE_TRIGGERED_WORKFLOW_ID}
  opts:
    description: |
      Fields separated by newlines and each field contains a `title` and a `value`.
      The `title` and the `value` fields are separated by a pipe `|` character.
      Empty lines and lines without a separator are omitted.

      The *title* shown as a bold heading above the `value` text.
      The *value* is the text value of the field.
    title: A list of fields to be displayed in a table inside the attachment
- buttons: |
    View App|${BITRISE_APP_URL}
    View Build|${BITRISE_BUILD_URL}
    Install Page|${BITRISE_PUBLIC_INSTALL_PAGE_URL}
  opts:
    description: |
      Buttons separated by newlines and each field contains a `text` and a `url`.
      The `text` and the `url` fields are separated by a pipe `|` character.
      Empty lines and lines without a separator are omitted.

      The *text* is the label for the button.
      The *url* is the fully qualified http or https url to deliver users to.
      An attachment may contain 1 to 5 buttons.
    title: A list of buttons attached to the message as link buttons
