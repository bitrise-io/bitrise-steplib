title: Deploy to Bitrise.io - Build Artifacts, Test Reports, and Pipeline intermediate
  files
summary: "Deploys build artifacts to make them available for the user on the build's
  **Artifacts** tab.  \nSends test results to the Test Reports add-on (build's **Tests**
  tab).\nUploads Pipeline intermediate files to make them available in subsequent
  Stages and also uploads Bitrise and user generated html reports."
description: "The Step accesses artifacts from a directory specified as the `$BITRISE_DEPLOY_DIR`
  where artifacts generated by previous Steps gets stored. \nThese artifacts are then
  uploaded on the **Artifacts** tab of any given build. For installable artifacts,
  such as IPAs or APKs, the Step can create a public install page that allows testers
  to install the app on their devices. \nYou can also use the Step to notify users
  about the build. If you wish to use the Test Reports add-on, you must add this Step
  in your Workflow since the Step converts test results to the right format and sends
  them to the add-on.\nThe Step can also share Pipeline intermediate files. These
  files are build artifacts generated by Workflows in a Pipeline intended to be shared
  with subsequent Stages.\nAlso it collects and uploads all of the html reports located
  in the `BITRISE_HTML_REPORT_DIR` folder.\n\n### Configuring the Build Artifact Deployment
  section of the Step\n\n1. Set the value for the **Deploy directory or file path**
  required input. The default value is the `$BITRISE_DEPLOY_DIR` Env Var which is
  exposed by the Bitrise CLI.\nIf you provide a directory, everything in that directory,
  excluding sub-directories, gets uploaded. \nIf you provide only a file, then only
  that file gets uploaded. \nTo upload a directory's content recursively, you should
  use the **Compress the artifacts into one file?** which will compress the whole
  directory, with every sub-directory included.\n2. Set the value of the **Notify:
  User Roles** input. It sends an email with the [public install URL](https://devcenter.bitrise.io/deploy/bitrise-app-deployment/)
  to those Bitrise users whose roles are included in this field. \nThe default value
  is `everyone`. If you wish to notify based on user roles, add one or more roles
  and separate them with commas, for example, `developers`, `admins`. If you don't
  want to notify anyone, set the input to `none`.\n3. Set the **Notify: Emails** sensitive
  input. It sends the public install URL in an email to the email addresses provided
  here. If you’re adding multiple email address, make sure to separate them with commas.
  \nThe recipients do not have to be in your Bitrise team. Please note that if the
  email address is associated with a Bitrise account, the user must be [watching](https://devcenter.bitrise.io/builds/configuring-notifications/#watching-an-app)
  the app.\n4. The **Enable public page for the App?** required input is set to `true`
  by default. It creates a long and random URL which can be shared with those who
  do not have a Bitrise account. \nIf you set this input to `false`, the **Notify:
  Emails** input will be ignored and the **Notify: User Roles** will receive the build
  URL instead of the public install URL.\n5. With the **Compress the artifacts into
  one file?** required input set to `true`, you can compress the artifacts found in
  the Deploy directory into a single file.\nYou can specify a custom name for the
  zip file with the `zip_name` option. If you don't specify one, the default `Deploy
  directory` name will be used. \nIf the **Compress the artifacts into one file?**
  is set to `false`, the artifacts in the Deploy directory will be deployed separately.\n6.
  With the **Format for the BITRISE_PUBLIC_INSTALL_PAGE_URL_MAP output** required
  input field, you can customize the output format of the public install page’s multiple
  artifact URLs so that the next Step can render the output (for example, our **Send
  a Slack message** Step). \nProvide a language template description using [https://golang.org/pkg/text/template](https://golang.org/pkg/text/template)
  so that the **Deploy to Bitrise.io** Step can build the required custom output.\n7.
  With the **Format for the BITRISE_PERMANENT_DOWNLOAD_URL_MAP output** required input,
  you can customize the output format of the `BITRISE_PERMANENT_DOWNLOAD_URL_MAP`
  so that the next Step can render the output.\nThe next Steps will use this input
  to generate the related output in the specified format. The output contains multiple
  permanent URLs for multiple artifacts.\nProvide a language template description
  using [https://golang.org/pkg/text/template](https://golang.org/pkg/text/template)
  so that the **Deploy to Bitrise.io** Step can build the required custom output.\n8.
  The **Test API's base URL** and the **API Token** input fields are automatically
  populated for you.\n9. The html report upload does not have any specific settings
  because it will happen automatically.\n\n### Configuring the Pipeline Intermediate
  File Sharing section of the Step\n\nThe **Files to share between pipeline stages**
  input specifies the files meant to be intermediate files shared between the Pipeline
  Stages. When uploading the Pipeline intermediate files, you must assign environment
  variable keys to them in the **Files to share between pipeline stages** input.\nThe
  inputs `path:env_key` values will be saved together with the file and later automatically
  reconstructed by the [Pull Pipeline intermediate files Step](https://www.bitrise.io/integrations/steps/pull-intermediate-files).
  \nYou can use a shorthand of just `env_var` for `$env_var:env_var`, when the `env_var`
  holds the path to the file(s) you want to share with subsequent stages.\nThe directories
  you specify will be archived and uploaded as a single file.\n\n#### Configuring
  the Debug section of the Step\n\nIf you wish to use any of the Step’s debug features,
  set the following inputs:\n1. In the **Name of the compressed artifact (without
  .zip extension)** input you can add a custom name for the compressed artifact. If
  you leave this input empty, the default `Deploy directory` name is used.\nPlease
  note that this input only works if you set the **Compress the artifacts into one
  file?** input to `true`.\n2. The **Bitrise Build URL** and the **Bitrise Build API
  Token** inputs are automatically populated.\n3. If **The Enable Debug Mode** required
  input is set to `true`, the Step prints more verbose logs. It is `false` by default.
  \n4. If you need a specific [bundletool version](https://github.com/google/bundletool/releases)
  other than the default value, you can modify the value of the **Bundletool version**
  required input. \nBundletool generates an APK from an Android App Bundle so that
  you can test the APK.\n\n### Troubleshooting\n\n- If your users did not get notified
  via email, check the **Enable public page for the App?** input. If it is set to
  `false`, no email notifications will be sent.\n- If there are no artifacts uploaded
  on the **APPS & ARTIFACTS tab**, then check the logs to see if the directory you
  used in the **Deploy directory or file path** input contained any artifacts. \n-
  If the email is not received, we recommend, that you check if the email is associated
  with Bitrise account and if so, if the account is “watching” the app.\n\n### Useful
  links\n\n- [Deployment on Bitrise](https://devcenter.bitrise.io/deploy/deployment-index/)\n-
  [Watching an app](https://devcenter.bitrise.io/builds/configuring-notifications/#watching-an-app)\n-
  [Using artifacts from different Stages](https://devcenter.bitrise.io/en/builds/build-pipelines/configuring-a-bitrise-pipeline.html#using-artifacts-from-different-stages)\n-
  [Viewing HTML reports](https://devcenter.bitrise.io/en/builds/build-data-and-troubleshooting/viewing-html-reports)\n
  \ \n  ### Related Steps\n\n- [Deploy to Google Play](https://www.bitrise.io/integrations/steps/google-play-deploy)\n-
  [Deploy to iTunesConnect](https://www.bitrise.io/integrations/steps/deploy-to-itunesconnect-deliver)\n-
  [Pull Pipeline intermediate files](https://www.bitrise.io/integrations/steps/pull-intermediate-files)"
website: https://github.com/bitrise-steplib/steps-deploy-to-bitrise-io
source_code_url: https://github.com/bitrise-steplib/steps-deploy-to-bitrise-io
support_url: https://github.com/bitrise-steplib/steps-deploy-to-bitrise-io/issues
published_at: 2024-04-18T09:24:43.457921696Z
source:
  git: https://github.com/bitrise-steplib/steps-deploy-to-bitrise-io.git
  commit: 5ae9364b59cac2837bf0d7fc05a2833461d0f321
host_os_tags:
- osx-10.10
type_tags:
- deploy
toolkit:
  go:
    package_name: github.com/bitrise-steplib/steps-deploy-to-bitrise-io
is_requires_admin_user: false
is_always_run: true
is_skippable: false
run_if: .IsCI
inputs:
- deploy_path: $BITRISE_DEPLOY_DIR
  opts:
    category: Build Artifact Deployment
    description: |
      Specify the directory or file path which will be deployed.

      If the specified path is a directory, then every file
      in the specified directory, excluding sub-directories, will be deployed.

      To upload the directory's content
      recursively, you should use the **Compress the artifacts into one file?** option
      which compresses the whole directory, with
      every sub-directory included.

      If you specify a file path, then only the specified
      file will be deployed.
    title: Deploy directory or file path
- is_compress: "false"
  opts:
    category: Build Artifact Deployment
    description: "If this option is set to `true` and a Deploy directory was specified,
      \nthe artifacts in that directory will be compressed into a single ZIP file.\n\nYou
      can specify a custom name for the ZIP using the `zip_name`\noption. If you do
      not specify a custom name, the default `Deploy directory` name will be used.\n\nIf
      this option is set to `false`, the artifacts\nfound in the Deploy directory
      folder will be deployed\nseparately."
    is_expand: false
    is_required: true
    summary: "If this option is set to `true` and a Deploy directory was specified,
      \nthe artifacts in that directory will be compressed into a single ZIP file."
    title: Compress the artifacts into one file?
    value_options:
    - "true"
    - "false"
- opts:
    category: Build Artifact Deployment
    description: "If you do not specify a custom name, the Deploy directory name will
      be used.\nYou can specify a custom name for the ZIP using the `zip_name`\noption.
      \n\nThis option only works if you selected *true* for *is_compress*."
    summary: Specify a custom name for the compressed artifact.
    title: Name of the compressed artifact (without .zip extension)
  zip_name: null
- notify_user_groups: everyone
  opts:
    category: Build Artifact Deployment
    description: |
      Your App's user roles you want to notify. Separate the role names with commas.
      Possible role names:

      * none
      * testers
      * developers
      * admins
      * owner
      * everyone

      An example to notify your developers and testers:

      `testers, developers`

      If you want to notify everyone in the app's team, just specify `everyone`.

      If you don't want to notify anyone, set this to `none`.
    title: 'Notify: User Roles'
- notify_email_list: null
  opts:
    category: Build Artifact Deployment
    description: "Email addresses to notify. Separate them with commas.\n\nYou can
      specify any email address, the recipients\ndon't have to be in your team.\n\nPlease
      note that if the email address is associated with a Bitrise account, \nthe user
      must be [watching](https://devcenter.bitrise.io/builds/configuring-notifications/#watching-an-app)
      the app.\n"
    is_sensitive: true
    title: 'Notify: Emails'
- is_enable_public_page: "true"
  opts:
    category: Build Artifact Deployment
    description: |
      If this option is enabled, a public install page
      will be available with a long and random URL which can be shared
      with others who are not registered on Bitrise.

      If you disable this option, the **Notify: Emails** option will
      be ignored and the **Notify: User Roles** users will receive the build's
      URL instead of the public page's URL!
    is_expand: false
    is_required: true
    title: Enable public page for the App?
    value_options:
    - "true"
    - "false"
- bundletool_version: 1.15.0
  opts:
    category: Build Artifact Deployment
    description: |-
      If you need a specific [bundletool version]((https://github.com/google/bundletool/releases) other than the default version,
        you can modify the value of the **Bundletool version** required input.
    is_required: true
    summary: The specific bundletool version you want to use.
    title: Bundletool version
- build_url: $BITRISE_BUILD_URL
  opts:
    category: Build Artifact Deployment
    description: Unique build URL of this build on Bitrise.io
    is_dont_change_value: true
    is_required: true
    summary: Unique build URL of this build on Bitrise.io
    title: Bitrise Build URL
- build_api_token: $BITRISE_BUILD_API_TOKEN
  opts:
    category: Build Artifact Deployment
    description: The build's API Token for the build on Bitrise.io
    is_dont_change_value: true
    is_required: true
    is_sensitive: true
    summary: The build's API Token for the build on Bitrise.io
    title: Bitrise Build API Token
- opts:
    category: Pipeline Intermediate File Sharing
    description: "A newline (`\\n`) separated list of file path - env key pairs (`{path}:{env_key}`).\n\nThe
      input uses a `{path}:{env_key}` syntax.\nThe colon character (`:`) is the delimiter
      between the file path and the environment variable key.\nA shorthand syntax
      of `ENV_VAR` can be used for `$ENV_VAR:ENV_VAR` when the name of the env var
      in the current workflow will become the shared env_key. \n\nThe file path can
      be specified with environment variables or direct paths,  \nand can point to
      both a local file or directory:\n```\n$BITRISE_IPA_PATH:BITRISE_IPA_PATH\nBITRISE_IPA_PATH\n$BITRISE_APK_PATH:DEVELOPMENT_APK_PATH\n./path/to/test_reports:TEST_REPORTS_DIR\n$BITRISE_SOURCE_DIR/deploy_dir:DEPLOY_DIR\n```"
    summary: A newline (`\n`) separated list of file path - env key pairs (`{path}:{env_key}`).
    title: Files to share between pipeline stages
  pipeline_intermediate_files: null
- addon_api_base_url: https://vdt.bitrise.io/test
  opts:
    category: Test Reports Addon
    description: |
      The URL where test API is accessible.
    is_dont_change_value: true
    is_required: true
    summary: The URL where test API is accessible.
    title: Test API's base URL
- addon_api_token: $ADDON_VDTESTING_API_TOKEN
  opts:
    category: Test Reports Addon
    description: |
      The token required to authenticate with the API.
    is_dont_change_value: true
    is_sensitive: true
    summary: The token required to authenticate with the API.
    title: API Token
- opts:
    category: Step output configuration
    description: |-
      Provide a language template description using [Golang templates](https://golang.org/pkg/text/template)
      so that the **Deploy to Bitrise.io** Step can build the required custom output.
    is_expand: false
    is_required: true
    summary: You can customize the format of the `BITRISE_PUBLIC_INSTALL_PAGE_URL_MAP`
      output so that the next Step can render the output.
    title: Format for the BITRISE_PUBLIC_INSTALL_PAGE_URL_MAP output
  public_install_page_url_map_format: '{{range $index, $element := .}}{{if $index}}|{{end}}{{$element.File}}=>{{$element.URL}}{{end}}'
- opts:
    category: Step output configuration
    description: "Provide a language template description using [Golang templates](https://golang.org/pkg/text/template)\nso
      that the **Deploy to Bitrise.io** Step can build the required custom output
      for the permanent download URL.  "
    is_expand: false
    is_required: true
    summary: You can customize the format of the `BITRISE_PERMANENT_DOWNLOAD_URL_MAP`
      output so that the next Step can render the output.
    title: Format for the BITRISE_PERMANENT_DOWNLOAD_URL_MAP output
  permanent_download_url_map_format: '{{range $index, $element := .}}{{if $index}}|{{end}}{{$element.File}}=>{{$element.URL}}{{end}}'
- files_to_redact: null
  opts:
    description: A newline (`\n`) separated list of file paths to redact secrets from
      before the step deploys them.
    is_required: false
    summary: "A newline (`\\n`) separated list of file paths to redact secrets from
      before the step deploys them.\n\nThe file path can be specified with environment
      variables or direct paths:\n```\n$XCODE_BUILD_RAW_RESULT_TEXT_PATH\n./path/to/build_log.xml\n```\n\nThe
      step will fail (and potentially also fail the build) if there is any error during
      the redaction process. \nThis will prevent secrets in files accidentally leaking
      out of builds."
    title: Files to redact
- debug_mode: "false"
  opts:
    category: Debugging
    description: The Step will print more verbose logs if enabled.
    is_required: true
    summary: The Step will print more verbose logs if enabled.
    title: Enable Debug Mode
    value_options:
    - "false"
    - "true"
outputs:
- BITRISE_PUBLIC_INSTALL_PAGE_URL: null
  opts:
    description: |-
      Public Install Page's URL, if the
      *Enable public page for the App?* option was *enabled*.
    title: Public Install Page URL
- BITRISE_PUBLIC_INSTALL_PAGE_URL_MAP: null
  opts:
    description: |-
      Public Install Page URLs by the artifact's file path.
      Only set it if the *Enable public page for the App?* option was *enabled*.

      The default format is `KEY1=>VALUE|KEY2=>VALUE` but is controlled by the `public_install_page_url_map_format` input

      Examples:

      - $BITRISE_DEPLOY_DIR/ios_app.ipa=>https://ios_app/public/install/page
      - $BITRISE_DEPLOY_DIR/android_app.apk=>https://android_app/public/install/page|$BITRISE_DEPLOY_DIR/ios_app.ipa=>https://ios_app/public/install/page
    title: Map of filenames and Public Install Page URLs
- BITRISE_PERMANENT_DOWNLOAD_URL_MAP: null
  opts:
    description: |-
      The output contains permanent Download URLs for each artifact. The URLs can be shared in any communication channel and they won't expire.
      The default format is `KEY1=>VALUE|KEY2=>VALUE` where key is the filename and the value is the URL.
      If you change `permanent_download_url_map_format` input then that will modify the format of this Env Var.
      You can customize the format of the multiple URLs.

      Examples:

      - $BITRISE_DEPLOY_DIR/ios_app.ipa=>https://app.bitrise.io/artifacts/ipa-slug/download
      - $BITRISE_DEPLOY_DIR/android_app.apk=>https://app.bitrise.io/artifacts/apk-slug/download|$BITRISE_DEPLOY_DIR/ios_app.ipa=>https://app.bitrise.io/artifacts/ipa-slug/download
    title: Map of filenames and Permanent Download URLs
